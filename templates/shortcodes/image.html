{% import "macros.html" as macros %}

{% if scale is not defined %}
    {% set_global scale = 1 %}
{% endif %}
{% if format is not defined %}
    {% set_global format = "webp" %}
{% endif %}
{% set class = macros::frac_to_class(frac=scale) %}

{% set scale = macros::frac_to_number(frac=scale) | float %}
{% set size = 1280 * scale | int %}
{% set new_image = resize_image(path=page.path ~ path, width=size, height=size, op="fit", format=format, quality=75) %}
{% set path1 = new_image.static_path | trim_start_matches(pat="static") %}

<div class="magnifier-container {{class}}">
<img
    class="not-default full-screen-img"
    width="{{new_image.width}}"
    height="{{new_image.height}}"
    src="{{path1}}" 
    onclick="full_screen('{{path}}')"
    onauxclick="full_screen_new_page('{{path}}')">
<img class="magnifier" src="/ico/magnifier.svg">
</div>